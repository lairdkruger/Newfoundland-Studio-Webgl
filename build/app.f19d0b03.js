!function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],f=0,p=[];f<s.length;f++)i=s[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);p.length;)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={0:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;a.push([207,1]),n()}({165:function(e,t){},207:function(e,t,n){"use strict";n.r(t);n(88),n(20),n(51),n(30),n(107),n(109),n(55);n(31),n(40),n(41),n(112),n(113),n(158),n(58),n(79),n(116),n(22),n(160),n(60),n(121),n(122),n(123),n(82),n(27),n(124),n(32);var r=n(132),o=n.n(r),a=n(64),i=n.n(a),s=n(62),c=n(63),u=(n(167),n(0));function l(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function f(e,t){return p.apply(this,arguments)}function p(){var e;return e=regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new u.Db).name=t,r.encoding=n.encoding||u.K,h(t,r,n),e.prev=4,e.next=7,Object(s.a)(t,{crossorigin:"anonymous"});case 7:return o=e.sent,r.image=o,r.needsUpdate=!0,n.renderer&&n.renderer.initTexture(r),e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(4),new Error("Could not load texture ".concat(t));case 17:case"end":return e.stop()}},e,null,[[4,14]])}),(p=function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){l(a,r,o,i,s,"next",e)}function s(e){l(a,r,o,i,s,"throw",e)}i(void 0)})}).apply(this,arguments)}function h(e,t,n){if("boolean"==typeof n.flipY&&(t.flipY=n.flipY),void 0!==n.mapping&&(t.mapping=n.mapping),void 0!==n.format)t.format=n.format;else{var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data:image\/jpeg/);t.format=r?u.tb:u.qb}n.repeat&&t.repeat.copy(n.repeat),t.wrapS=n.wrapS||u.j,t.wrapT=n.wrapT||u.j,t.minFilter=n.minFilter||u.M,t.magFilter=n.magFilter||u.L,t.generateMipmaps=!1!==n.generateMipmaps}n(84);var m=n(133),d=n.n(m),v=n(142);function y(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function g(e,t){return b.apply(this,arguments)}function b(){var e;return e=regeneratorRuntime.mark(function e(t,n){var r,o,a,i,s,c,l,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.renderer){e.next=3;break}throw new Error("Env map requires renderer to passed in the options for ".concat(t,"!"));case 3:if(!n.equirectangular){e.next=17;break}return e.next=6,f(t,{renderer:r});case 6:if(o=e.sent,!n.pmrem){e.next=11;break}return e.abrupt("return",x(o,r));case 11:return a=d()(o.image.naturalHeight),i=new u.Mb(a,{generateMipmaps:!0,minFilter:u.N,magFilter:u.L}),s=i.fromEquirectangularTexture(r,o),o.dispose(),o.image.data=null,e.abrupt("return",s);case 17:if(c=t,l=n.extension||".jpg",h="".concat(c.replace(/\/$/,""),"/"),m=l,p=["".concat(h,"px").concat(m),"".concat(h,"nx").concat(m),"".concat(h,"py").concat(m),"".concat(h,"ny").concat(m),"".concat(h,"pz").concat(m),"".concat(h,"nz").concat(m)],".hdr"!==l){e.next=22;break}return e.abrupt("return",new Promise(function(e,t){(new v.a).load(u.Ib,p,function(t){return e(w(t,n))},null,function(){return t(new Error("Could not load env map: ".concat(c)))})}));case 22:return e.abrupt("return",new Promise(function(e,t){(new u.o).load(p,function(t){return e(w(t,n))},null,function(){return t(new Error("Could not load env map: ".concat(c)))})}));case 23:case"end":return e.stop()}var h,m},e)}),(b=function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){y(a,r,o,i,s,"next",e)}function s(e){y(a,r,o,i,s,"throw",e)}i(void 0)})}).apply(this,arguments)}function w(e,t){return t.encoding&&(e.encoding=t.encoding),t.format&&(e.format=t.format),t.pmrem&&(e=function(e,t){var n=new u.hb(t);n.compileCubemapShader();var r=n.fromCubemap(e);return n.dispose(),e.dispose(),e.image.data=null,r.texture}(e,t.renderer)),e}function x(e,t){var n=new u.hb(t);n.compileEquirectangularShader();var r=n.fromEquirectangular(e);return n.dispose(),e.dispose(),e.image.data=null,r.texture}function k(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){P(a,r,o,i,s,"next",e)}function s(e){P(a,r,o,i,s,"throw",e)}i(void 0)})}}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){C(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var R=0;function D(e){return"__private_"+R+++"_"+e}var A=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,U,{writable:!0,value:[]}),Object.defineProperty(this,z,{writable:!0,value:{}}),Object.defineProperty(this,V,{writable:!0,value:[]}),Object.defineProperty(this,I,{writable:!0,value:10}),Object.defineProperty(this,K,{writable:!0,value:[]}),this.get=function(e){if(!e)throw new TypeError("Must specify an URL for AssetManager.get()");if(!(e in E(t,z)[z]))throw new Error("The asset ".concat(e," is not in the loaded files."));return E(t,z)[z][e]}}var t,n,r,a,u,l;return t=e,(n=[{key:"addProgressListener",value:function(e){if("function"!=typeof e)throw new TypeError("onProgress must be a function");E(this,V)[V].push(e)}},{key:"queue",value:function(e){var t=e.url,n=e.type,r=_(e,["url","type"]);if(!t)throw new TypeError("Must specify a URL or opt.url for AssetManager.queue()");return this._getQueued(t)||E(this,U)[U].push(T({url:t,type:n||this._extractType(t)},r)),t}},{key:"_getQueued",value:function(e){return E(this,U)[U].find(function(t){return t.url===e})}},{key:"_extractType",value:function(e){var t=e.slice(e.lastIndexOf("."));switch(!0){case/\.(gltf|glb)$/i.test(t):return"gltf";case/\.json$/i.test(t):return"json";case/\.svg$/i.test(t):return"svg";case/\.(jpe?g|png|gif|bmp|tga|tif)$/i.test(t):return"image";case/\.(wav|mp3)$/i.test(t):return"audio";case/\.(mp4|webm|ogg|ogv)$/i.test(t):return"video";default:throw new Error("Could not load ".concat(e,", unknown file extension!"))}}},{key:"loadSingle",value:(l=O(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.renderer,r=_(t,["renderer"]),n){e.next=3;break}throw new Error("You must provide a renderer to the loadSingle function.");case 3:return e.prev=3,o=Date.now(),e.next=7,this._loadItem(T({renderer:n},r));case 7:return E(this,z)[z][r.url]=e.sent,window.DEBUG&&console.log("\ud83d\udce6 Loaded single asset %c".concat(r.url,"%c in ").concat(i()(Date.now()-o)),"color:blue","color:black"),e.abrupt("return",r.url);case 12:e.prev=12,e.t0=e.catch(3),delete E(this,z)[z][r.url],console.error("\ud83d\udce6  Could not load ".concat(r.url,":\n").concat(e.t0));case 16:case"end":return e.stop()}},e,this,[[3,12]])})),function(e){return l.apply(this,arguments)})},{key:"load",value:(u=O(regeneratorRuntime.mark(function e(t){var n,r,a,s,c,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.renderer){e.next=3;break}throw new Error("You must provide a renderer to the load function.");case 3:if(r=E(this,U)[U].slice(),E(this,U)[U].length=0,0!==(a=r.length)){e.next=9;break}return setTimeout(function(){return E(u,V)[V].forEach(function(e){return e(1)})},0),e.abrupt("return");case 9:return s=Date.now(),e.next=12,o()(r,function(){var e=O(regeneratorRuntime.mark(function e(t,r){var o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=Date.now(),e.next=4,u._loadItem(T({renderer:n},t));case 4:E(u,z)[z][t.url]=e.sent,window.DEBUG&&u.log("Loaded %c".concat(t.url,"%c in ").concat(i()(Date.now()-o)),"color:blue","color:black"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u.logError("Skipping ".concat(t.url," from asset loading:\n").concat(e.t0));case 11:s=(r+1)/a,E(u,V)[V].forEach(function(e){return e(s)});case 13:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,n){return e.apply(this,arguments)}}(),{concurrency:E(this,I)[I]});case 12:window.DEBUG&&(c=E(this,K)[K].filter(function(e){return"error"===e.type}),this.groupLog("\ud83d\udce6 Assets loaded in ".concat(i()(Date.now()-s)," \u23f1 ").concat(c.length>0?"%c \u26a0\ufe0f Skipped ".concat(c.length," asset").concat(c.length>1?"s":""," "):""),c.length>0?"color:white;background:red;":""));case 13:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"_loadItem",value:(a=O(regeneratorRuntime.mark(function e(t){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url,r=t.type,o=t.renderer,a=_(t,["url","type","renderer"]),!(n in E(this,z)[z])){e.next=3;break}return e.abrupt("return",E(this,z)[z][n]);case 3:e.t0=r,e.next="gltf"===e.t0?6:"json"===e.t0?7:"env-map"===e.t0?8:"svg"===e.t0?9:"image"===e.t0?9:"texture"===e.t0?10:"audio"===e.t0?11:"video"===e.t0?12:13;break;case 6:return e.abrupt("return",new Promise(function(e,t){(new c.a).load(n,e,null,function(e){return t(new Error("Could not load GLTF asset ".concat(n,":\n").concat(e)))})}));case 7:return e.abrupt("return",fetch(n).then(function(e){return e.json()}));case 8:return e.abrupt("return",g(n,T({renderer:o},a)));case 9:return e.abrupt("return",Object(s.a)(n,{crossorigin:"anonymous"}));case 10:return e.abrupt("return",f(n,T({renderer:o},a)));case 11:return e.abrupt("return",fetch(n).then(function(e){return e.arrayBuffer()}));case 12:return e.abrupt("return",fetch(n).then(function(e){return e.blob()}));case 13:throw new Error("Could not load ".concat(n,", the type ").concat(r," is unknown!"));case 14:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E(this,K)[K].push({type:"log",text:t})}},{key:"logError",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E(this,K)[K].push({type:"error",text:t})}},{key:"groupLog",value:function(){var e;(e=console).groupCollapsed.apply(e,arguments),E(this,K)[K].forEach(function(e){var t;(t=console)[e.type].apply(t,k(e.text))}),console.groupEnd(),E(this,K)[K].length=0}}])&&M(t.prototype,n),r&&M(t,r),e}(),U=D("queue"),z=D("cache"),V=D("onProgressListeners"),I=D("asyncConcurrency"),K=D("logs"),q=new A,L=(n(169),n(170),n(174),n(134)),B=n.n(L),F=n(135),H=n.n(F),G=n(136),W=n.n(G),N=n(137),$=n.n(N),Y=n(138),X=n.n(Y),J=n(139),Q=n.n(J),Z=n(140),ee=n(23),te=n(43),ne=n(5),re=n.n(ne);function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ae=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tmpVec0=new re.a.Vec3,this.tmpVec1=new re.a.Vec3,this.tmpVec2=new re.a.Vec3,this.tmpQuat0=new re.a.Vec3,this.scene=t,this.world=n,this._meshes=[],this._material=new u.V({color:65280,wireframe:!0}),this._sphereGeometry=new u.Ab(1),this._boxGeometry=new u.g(1,1,1),this._planeGeometry=new u.kb(10,10,10,10),this._cylinderGeometry=new u.p(1,1,10,10)}var t,n,r;return t=e,(n=[{key:"update",value:function(){for(var e=this.world.bodies,t=this._meshes,n=this.tmpVec0,r=this.tmpQuat0,o=0,a=0;a!==e.length;a++)for(var i=e[a],s=0;s!==i.shapes.length;s++){var c=i.shapes[s];this._updateMesh(o,i,c);var u=t[o];u&&(i.quaternion.vmult(i.shapeOffsets[s],n),i.position.vadd(n,n),i.quaternion.mult(i.shapeOrientations[s],r),u.position.copy(n),u.quaternion.copy(r),"visible"in i&&(u.visible=i.visible)),o+=1}for(var l=o;l<t.length;l++){var f=t[l];f&&this.scene.remove(f)}t.length=o}},{key:"_updateMesh",value:function(e,t,n){var r=this._meshes[e];this._typeMatch(r,n)||(r&&this.scene.remove(r),r=this._meshes[e]=this._createMesh(n)),this._scaleMesh(r,n)}},{key:"_createMesh",value:function(e){var t,n=this._material,r=new u.y;switch(e.type){case re.a.Shape.types.SPHERE:t=new u.U(this._sphereGeometry,n);break;case re.a.Shape.types.BOX:t=new u.U(this._boxGeometry,n);break;case re.a.Shape.types.PLANE:t=new u.U(this._planeGeometry,n);break;case re.a.Shape.types.CONVEXPOLYHEDRON:for(var o=0;o<e.vertices.length;o++){var a=e.vertices[o];r.vertices.push(new u.Kb(a.x,a.y,a.z))}for(var i=0;i<e.faces.length;i++)for(var s=e.faces[i],c=s[0],l=1;l<s.length-1;l++){var f=s[l],p=s[l+1];r.faces.push(new u.u(c,f,p))}r.computeBoundingSphere(),r.computeFaceNormals(),t=new u.U(r,n),e.geometryId=r.id;break;case re.a.Shape.types.TRIMESH:for(var h=0;h<e.indices.length/3;h++){e.getTriangleVertices(h,this.tmpVec0,this.tmpVec1,this.tmpVec2),r.vertices.push(new u.Kb(this.tmpVec0.x,this.tmpVec0.y,this.tmpVec0.z),new u.Kb(this.tmpVec1.x,this.tmpVec1.y,this.tmpVec1.z),new u.Kb(this.tmpVec2.x,this.tmpVec2.y,this.tmpVec2.z));var m=r.vertices.length-3;r.faces.push(new u.u(m,m+1,m+2))}r.computeBoundingSphere(),r.computeFaceNormals(),t=new u.U(r,n),e.geometryId=r.id;break;case re.a.Shape.types.HEIGHTFIELD:for(var d=0;d<e.data.length-1;d++)for(var v=0;v<e.data[d].length-1;v++)for(var y=0;y<2;y++){e.getConvexTrianglePillar(d,v,0===y),this.tmpVec0.copy(e.pillarConvex.vertices[0]),this.tmpVec1.copy(e.pillarConvex.vertices[1]),this.tmpVec2.copy(e.pillarConvex.vertices[2]),this.tmpVec0.vadd(e.pillarOffset,this.tmpVec0),this.tmpVec1.vadd(e.pillarOffset,this.tmpVec1),this.tmpVec2.vadd(e.pillarOffset,this.tmpVec2),r.vertices.push(new u.Kb(this.tmpVec0.x,this.tmpVec0.y,this.tmpVec0.z),new u.Kb(this.tmpVec1.x,this.tmpVec1.y,this.tmpVec1.z),new u.Kb(this.tmpVec2.x,this.tmpVec2.y,this.tmpVec2.z));var g=r.vertices.length-3;r.faces.push(new u.u(g,g+1,g+2))}r.computeBoundingSphere(),r.computeFaceNormals(),t=new u.U(r,n),e.geometryId=r.id}return t&&this.scene.add(t),t}},{key:"_typeMatch",value:function(e,t){if(!e)return!1;var n=e.geometry;return n instanceof u.Ab&&t instanceof re.a.Sphere||n instanceof u.g&&t instanceof re.a.Box||n instanceof u.kb&&t instanceof re.a.Plane||n.id===t.geometryId&&t instanceof re.a.ConvexPolyhedron||n.id===t.geometryId&&t instanceof re.a.Trimesh||n.id===t.geometryId&&t instanceof re.a.Heightfield}},{key:"_scaleMesh",value:function(e,t){var n=t.radius;switch(t.type){case re.a.Shape.types.SPHERE:e.scale.set(n,n,n);break;case re.a.Shape.types.BOX:e.scale.copy(t.halfExtents),e.scale.multiplyScalar(2);break;case re.a.Shape.types.CONVEXPOLYHEDRON:e.scale.set(1,1,1);break;case re.a.Shape.types.TRIMESH:e.scale.copy(t.scale);break;case re.a.Shape.types.HEIGHTFIELD:e.scale.set(1,1,1)}}}])&&oe(t.prototype,n),r&&oe(t,r),e}();function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach(function(t){ce(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var pe=0;function he(e){return"__private_"+pe+++"_"+e}var me=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.background,o=void 0===r?"#000":r,a=n.backgroundAlpha,i=void 0===a?1:a,s=n.fov,c=void 0===s?45:s,l=n.near,f=void 0===l?.01:l,p=n.far,h=void 0===p?5e3:p,m=ue(n,["background","backgroundAlpha","fov","near","far"]);if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,de,{writable:!0,value:[]}),Object.defineProperty(this,ve,{writable:!0,value:new u.Kb}),Object.defineProperty(this,ye,{writable:!0,value:void 0}),Object.defineProperty(this,ge,{writable:!0,value:void 0}),Object.defineProperty(this,be,{writable:!0,value:void 0}),this.resize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=void 0===n?t.width:n,o=e.height,a=void 0===o?t.height:o,i=e.pixelRatio,s=void 0===i?t.pixelRatio:i;return t.renderer.getPixelRatio()!==s&&t.renderer.setPixelRatio(s),t.renderer.setSize(r,a),t.camera.isPerspectiveCamera&&(t.camera.aspect=r/a),t.camera.updateProjectionMatrix(),t.composer&&t.composer.setSize(s*r,s*a),t.currentScene.traverse(function(e){"function"==typeof e.resize&&e.resize({width:r,height:a,pixelRatio:s})}),t.draw(),t},this.saveScreenshot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=void 0===n?2560:n,o=e.height,a=void 0===o?1440:o,i=e.fileName,s=void 0===i?"image.png":i;t.resize({width:r,height:a,pixelRatio:1}),t.draw();var c=t.canvas.toDataURL("image/png");t.resize(),t.draw(),we(s,c)},this.update=function(e,n,r){return t.orbitControls&&(t.orbitControls.update(),t.camera.up.fromArray(t.orbitControls.up),t.camera.position.fromArray(t.orbitControls.position),fe(t,ve)[ve].fromArray(t.orbitControls.target),t.camera.lookAt(fe(t,ve)[ve])),t.currentScene.traverse(function(t){"function"==typeof t.update&&t.update(e,n,r)}),t.world&&(t.world.step(1/60,e),t.cannonDebugRenderer&&t.cannonDebugRenderer.update(),t.world.bodies.forEach(function(t){"function"==typeof t.update&&t.update(e,n)})),fe(t,de)[de].forEach(function(t){return t(e,n,r)}),t},this.draw=function(){return t.composer?(t.currentScene!=t.oldScene&&(t.composer.passes[0]=new te.a(t.currentScene,t.camera),t.oldScene=t.currentScene),t.composer.passes.forEach(function(e,t,n){var r=t===n.length-1;e.renderToScreen=!!r}),t.composer.render()):t.renderer.render(t.currentScene,t.camera),t},this.start=function(){if(!t.isRunning)return t.renderer.setAnimationLoop(t.animate),t.isRunning=!0,t},this.stop=function(){if(t.isRunning)return t.renderer.setAnimationLoop(null),t.isRunning=!1,t},this.animate=function(e,n){if(t.isRunning){t.stats&&t.stats.begin();var r=Math.min(t.maxDeltaTime,(e-fe(t,ye)[ye])/1e3);t.time+=r,fe(t,ye)[ye]=e,t.update(r,t.time,n),t.draw(),t.stats&&t.stats.end()}},this.traverse=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t.currentScene.traverse(function(t){"function"==typeof t[e]&&t[e].apply(t,r)})},this.renderer=new u.Ob(se({antialias:!0,alpha:!1,preserveDrawingBuffer:!1,failIfMajorPerformanceCaveat:!0},m)),this.renderer.sortObjects=!1,this.canvas=this.renderer.domElement,this.renderer.setClearColor(o,i),m.xr&&(this.renderer.xr.enabled=!0),fe(this,ge)[ge]=m.width,fe(this,be)[be]=m.height,this.maxPixelRatio=m.maxPixelRatio||2,this.maxDeltaTime=m.maxDeltaTime||1/30,this.camera=new u.ib(c,1,f,h),this.cameraTarget=new u.Kb(0,0,0),this.scenes={},this.scenesParams={},this.scenes.defaultScene=new u.vb,this.currentScene=this.scenes.defaultScene,this.oldScene=this.currentScene,this.mouse=new u.Kb,this.mouse2D=new u.Jb,this.mouse3D=new u.Kb,this.gl=this.renderer.getContext(),this.time=0,this.isRunning=!1,fe(this,ye)[ye]=performance.now(),window.addEventListener("mousemove",this.onMouseMove.bind(this),!1),window.addEventListener("resize",this.resize),window.addEventListener("orientationchange",this.resize),this.resize(),this.touchHandler=H()(this.canvas,{target:this.canvas,filtered:!0}),this.isDragging=!1,this.touchHandler.on("start",function(e,n){t.isDragging=!0,t.traverse("onPointerDown",e,n)}),this.touchHandler.on("move",function(e,n){return t.traverse("onPointerMove",e,n)}),this.touchHandler.on("end",function(e,n){t.isDragging=!1,t.traverse("onPointerUp",e,n)}),m.postprocessing&&(this.composer=new ee.a(this.renderer),this.composer.addPass(new te.a(this.currentScene,this.camera))),m.orbitControls&&(this.orbitControls=B()(se({element:this.canvas,parent:window,distance:4},m.orbitControls instanceof Object?m.orbitControls:{})),this.camera.position.fromArray(this.orbitControls.position),this.camera.lookAt((new u.Kb).fromArray(this.orbitControls.target))),m.world&&(this.world=m.world,m.showWorldWireframes&&(this.cannonDebugRenderer=new ae(this.currentScene,this.world))),m.showFps&&(this.stats=new $.a,this.stats.showPanel(0),document.body.appendChild(this.stats.dom)),m.controls){var d=X()(m.controls);if(this.controls=m.hideControls?d:Q()(d,{expanded:!m.closeControls}),!m.hideControls){var v=document.createElement("style");v.type="text/css",v.innerHTML='\n          [class^="controlPanel-"] [class*="__field"]::before {\n            content: initial !important;\n          }\n          [class^="controlPanel-"] [class*="__labelText"] {\n            text-indent: 6px !important;\n          }\n          [class^="controlPanel-"] [class*="__field--button"] > button::before {\n            content: initial !important;\n          }\n        ',document.head.appendChild(v)}}var y=Object(Z.getGPUTier)({glContext:this.renderer.getContext()});this.gpu={name:y.type,tier:Number(y.tier.slice(-1)),isMobile:y.tier.toLowerCase().includes("mobile")}}var t,n,r;return t=e,(n=[{key:"onMouseMove",value:function(e){var t=document.getElementById("webgl-canvas"),n=t.getBoundingClientRect(),r=e.clientX-n.left,o=e.clientY-n.top;this.mouse.x=r*t.width/t.clientWidth,this.mouse.y=o*t.height/t.clientHeight,this.mouse2D.x=r*t.width/t.clientWidth,this.mouse2D.y=o*t.height/t.clientHeight,this.normalizeMouse2D(t)}},{key:"normalizeMouse2D",value:function(e){this.mouse2D.x=this.mouse2D.x/e.width-.5,this.mouse2D.y=this.mouse2D.y/e.height-.5}},{key:"updateMouse3D",value:function(){this.mouse.unproject(this.camera),this.mouse.sub(this.camera.position).normalize();this.camera.position.z,this.mouse.z;this.mouse3D.copy(this.camera.position).add(this.mouse.multiplyScalar(2))}},{key:"onUpdate",value:function(e){fe(this,de)[de].push(e)}},{key:"offUpdate",value:function(e){var t=fe(this,de)[de].indexOf(e);-1!==t&&fe(this,de)[de].splice(t,1)}},{key:"width",get:function(){return fe(this,ge)[ge]||window.innerWidth}},{key:"height",get:function(){return fe(this,be)[be]||window.innerHeight}},{key:"pixelRatio",get:function(){return Math.min(this.maxPixelRatio,window.devicePixelRatio)}},{key:"cursor",get:function(){return this.canvas.style.cursor},set:function(e){this.canvas.style.cursor=e||null}}])&&le(t.prototype,n),r&&le(t,r),e}(),de=he("updateListeners"),ve=he("tmpTarget"),ye=he("lastTime"),ge=he("width"),be=he("height");function we(e,t){var n=W()(t),r=document.createElement("a");r.download=e,r.href=window.URL.createObjectURL(n),r.onclick=setTimeout(function(){window.URL.revokeObjectURL(n),r.removeAttribute("href")},0),r.click()}var xe=new me({canvas:document.querySelector("#webgl-canvas"),alpha:!0,background:"#000",backgroundAlpha:1,postprocessing:!0,orbitControls:!1}),ke=n(143);function Se(e,t,n){var r=new te.a(t,e.camera),o=new ke.a(n.resolution,n.strength,n.radius,n.threshold);e.composer.addPass(r),e.composer.addPass(o)}n(85);var Pe=n(17);["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),["uniform sampler2D tDiffuse;","uniform float amount;","uniform float angle;","varying vec2 vUv;","void main() {","\tvec2 offset = amount * vec2( cos(angle), sin(angle));","\tvec4 cr = texture2D(tDiffuse, vUv + offset);","\tvec4 cga = texture2D(tDiffuse, vUv);","\tvec4 cb = texture2D(tDiffuse, vUv - offset);","\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);","}"].join("\n");function Oe(e,t){var n=new Pe.a(je);n.uniforms.movement.value=.1,n.uniforms.intensity.value=.1,e.composer.addPass(n),e.onUpdate(function(e,t){return function(e){n.uniforms.movement.value+=e}(e)})}var je={uniforms:{tDiffuse:{value:null},movement:{value:0},intensity:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float movement;","uniform float intensity;","varying vec2 vUv;","float random( vec2 p ) {","vec2 K1 = vec2(23.14069263277926, 2.665144142690225);","return fract( cos( dot(p,K1) ) * 12345.6789 );","}","void main() {","vec4 color = texture2D( tDiffuse, vUv );","vec2 uvRandom = vUv;","uvRandom.y *= random( vec2(uvRandom.y,movement) );","color.rgb += random( uvRandom ) * intensity;","gl_FragColor = vec4( color );","}"].join("\n")};n(86),n(87);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ae=q.queue({url:"assets/obj/wolf.glb",type:"gltf"}),Ue=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ee(this,Re(t).call(this,n))).webgl=e,r.options=n,r.shaders={},r.basicMaterialsReady={},r.shaderMaterialsReady={},r.addGLTF(Ae),r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(t,u["z"]),n=t,(r=[{key:"addGLTF",value:function(e){var t=this;(new c.a).load(e,function(e){t.gltf=e,t.gltfScene=e.scene;var n=(new u.f).setFromObject(t.gltfScene),r=n.getCenter(new u.Kb),o=n.getSize(new u.Kb),a=Math.max(o.x,o.y,o.z);t.gltfScene.scale.multiplyScalar(1/a),n.setFromObject(t.gltfScene),n.getCenter(r),n.getSize(o),t.gltfScene.position.y-=.1,t.add(t.gltfScene),t.gltfLoaded=!0,t.wolf=t.gltfScene.getObjectByName("Wolf"),t.wolfSkeleton=t.gltfScene.getObjectByName("Wolf_Skeleton"),t.rock=t.gltfScene.getObjectByName("Rock"),t.createMaterials(),t.initAnimations()},function(e){},function(e){console.log(e)})}},{key:"createMaterials",value:function(){this.createWolfMaterial(),this.createRockMaterial()}},{key:"createWolfMaterial",value:function(){var e,t;this.wolfMaterialKey="wolfMaterial","landing"==this.options.scene&&function(t){e=new u.W({color:16777215,skinning:!0,wireframe:!1});var n=[{from:"#include <common>",to:"\n                #include <common>\n                /* custom uniforms go here */\n\n                uniform float uTime;\n              "},{from:"#include <color_fragment>",to:"\n                #include <color_fragment>\n                /* set diffuseColor.rgb here */\n\n                {\n                /*\n                  float fluctuate = (sin(uTime) + 1.0) / 2.0;\n                  diffuseColor.rgb = vec3(0.0, 0.0, 0.0);\n                */\n                }\n              "}];e.onBeforeCompile=function(r){n.forEach(function(e){r.fragmentShader=r.fragmentShader.replace(e.from,e.to)}),r.uniforms.uTime={value:0},t.shaders[t.wolfMaterialKey]=r,t.shaderMaterialsReady[t.wolfMaterialKey]=e}}(this),"about"==this.options.scene&&((t=(new u.o).load(["assets/textures/standard/colourBars_square.jpg","assets/textures/standard/colourBars_square.jpg","assets/textures/standard/colourBars_square.jpg","assets/textures/standard/colourBars_square.jpg","assets/textures/standard/colourBars_square.jpg","assets/textures/standard/colourBars_square.jpg"])).mapping=u.m,e=new u.V({envMap:t,reflectivity:1,skinning:!0})),"work"==this.options.scene&&function(t){e=new u.X({skinning:!0,wireframe:!0});var n=[{from:"#include <common>",to:"\n                #include <common>\n                /* custom uniforms go here */\n\n                uniform float uTime;\n              "},{from:"#include <color_fragment>",to:"\n                #include <color_fragment>\n                /* set diffuseColor.rgb here */\n\n                {\n                /*\n                  float fluctuate = (sin(uTime) + 1.0) / 2.0;\n                  diffuseColor.rgb = vec3(0.0, 0.0, 0.0);\n                */\n                }\n              "}];e.onBeforeCompile=function(r){n.forEach(function(e){r.fragmentShader=r.fragmentShader.replace(e.from,e.to)}),r.uniforms.uTime={value:0},t.shaders[t.wolfMaterialKey]=r,t.shaderMaterialsReady[t.wolfMaterialKey]=e}}(this),this.wolf.material=e}},{key:"createRockMaterial",value:function(){var e,t;this.reflectionMaterialKey="reflectionMaterial","landing"==this.options.scene&&function(t){var n=new u.o,r=t.options.skyIndex;if(t.options.noSun)var o=n.load(["assets/textures/skyboxes/starscape"+r+"/right.png","assets/textures/skyboxes/starscape"+r+"/left_no_sun.png","assets/textures/skyboxes/starscape"+r+"/top.png","assets/textures/skyboxes/starscape"+r+"/bottom.png","assets/textures/skyboxes/starscape"+r+"/front.png","assets/textures/skyboxes/starscape"+r+"/back.png"]);else o=n.load(["assets/textures/skyboxes/starscape"+r+"/right.png","assets/textures/skyboxes/starscape"+r+"/left.png","assets/textures/skyboxes/starscape"+r+"/top.png","assets/textures/skyboxes/starscape"+r+"/bottom.png","assets/textures/skyboxes/starscape"+r+"/front.png","assets/textures/skyboxes/starscape"+r+"/back.png"]);o.mapping=u.m,e=new u.V({envMap:o,reflectivity:1})}(this),"about"==this.options.scene&&((t=(new u.o).load(["assets/textures/standard/static.jpg","assets/textures/standard/static.jpg","assets/textures/standard/static.jpg","assets/textures/standard/static.jpg","assets/textures/standard/static.jpg","assets/textures/standard/static.jpg"])).mapping=u.m,e=new u.V({envMap:t,reflectivity:1})),"work"==this.options.scene&&function(t){var n=new u.o,r=t.options.skyIndex;if(t.options.noSun)var o=n.load(["assets/textures/skyboxes/starscape"+r+"/right.png","assets/textures/skyboxes/starscape"+r+"/left_no_sun.png","assets/textures/skyboxes/starscape"+r+"/top.png","assets/textures/skyboxes/starscape"+r+"/bottom.png","assets/textures/skyboxes/starscape"+r+"/front.png","assets/textures/skyboxes/starscape"+r+"/back.png"]);else o=n.load(["assets/textures/skyboxes/starscape"+r+"/right.png","assets/textures/skyboxes/starscape"+r+"/left.png","assets/textures/skyboxes/starscape"+r+"/top.png","assets/textures/skyboxes/starscape"+r+"/bottom.png","assets/textures/skyboxes/starscape"+r+"/front.png","assets/textures/skyboxes/starscape"+r+"/back.png"]);o.mapping=u.m,e=new u.V({color:0,envMap:o,reflectivity:.66})}(this),this.rock.material=e,this.basicMaterialsReady[this.reflectionMaterialKey]=e}},{key:"updateUniforms",value:function(e){this.wolfMaterialKey in this.shaderMaterialsReady&&(this.shaders[this.wolfMaterialKey].uniforms.uTime.value+=e)}},{key:"initAnimations",value:function(){this.mixer=new u.c(this.gltfScene),this.clips=this.gltf.animations,this.rockPoseClip=u.b.findByName(this.clips,"Rock Pose FK"),this.rockPoseAction=this.mixer.clipAction(this.rockPoseClip),this.rockPoseAction.play()}},{key:"onPointerDown",value:function(e,t){var n=Ce(t,2);n[0],n[1]}},{key:"onPointerMove",value:function(e,t){var n=Ce(t,2);n[0],n[1]}},{key:"onPointerUp",value:function(e,t){var n=Ce(t,2);n[0],n[1]}},{key:"update",value:function(e,t){this.updateUniforms(e),this.mixer&&this.mixer.update(e)}}])&&Me(n.prototype,r),o&&Me(n,o),t}();function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Le=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ie(this,Ke(t).call(this,n))).webgl=e,r.options=n,r.shaders={},r.shaderMaterialsReady={},r.init(),r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(t,u["z"]),n=t,(r=[{key:"init",value:function(){var e=this;this.skyMaterialKey="skyMaterial";var t=new u.o,n=this.options.skyIndex;this.skyBoxTexture=t.load(["assets/textures/skyboxes/starscape"+n+"/right.png","assets/textures/skyboxes/starscape"+n+"/left.png","assets/textures/skyboxes/starscape"+n+"/top.png","assets/textures/skyboxes/starscape"+n+"/bottom.png","assets/textures/skyboxes/starscape"+n+"/front.png","assets/textures/skyboxes/starscape"+n+"/back.png"]);var r=new u.Ab(200,1,1),o=new u.V({side:u.d,envMap:this.skyBoxTexture}),a=[{from:"#include <common>",to:"\n                #include <common>\n                /* custom uniforms go here */\n\n                uniform float uTime;\n              "},{from:"#include <color_fragment>",to:"\n                #include <color_fragment>\n                /* set diffuseColor.rgb here */\n\n                {\n                  float fluctuate = (sin(uTime) + 1.0) / 4.0;\n\n                  diffuseColor.rgb = vec3(1.0, 1.0, 1.0);\n                }\n              "}];o.onBeforeCompile=function(t){a.forEach(function(e){t.fragmentShader=t.fragmentShader.replace(e.from,e.to)}),t.uniforms.uTime={value:0},e.shaders[e.skyMaterialKey]=t,e.shaderMaterialsReady[e.skyMaterialKey]=o};var i=new u.U(r,o);this.add(i)}},{key:"updateUniforms",value:function(e){this.skyMaterialKey in this.shaderMaterialsReady&&(this.shaders[this.skyMaterialKey].uniforms.uTime.value+=e)}},{key:"update",value:function(e,t){this.updateUniforms(e)}}])&&Ve(n.prototype,r),o&&Ve(n,o),t}();function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Fe=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sceneKey="landingScene",xe.scenes[this.sceneKey]=new u.vb,this.scene=xe.scenes[this.sceneKey],this.initScene(),xe.scenesParams[this.sceneKey]=this}var t,n,r;return t=e,(n=[{key:"initScene",value:function(){var e,t;this.setCamera(),e=this.scene,(t=new u.s(16777215,1)).position.set(-1,0,-1),e.add(t),this.landingWolf=new Ue(xe,{scene:"landing",skyIndex:"3",noSun:!0}),this.scene.add(this.landingWolf),this.landingSkybox=new Le(xe,{scene:"landing",skyIndex:"3"}),this.scene.add(this.landingSkybox)}},{key:"setCamera",value:function(){xe.orbitControls?(xe.orbitControls.position=[1.1770132413546304,.657532091665101,.04683957130027806],xe.orbitControls.distance=1.240000000000002,xe.orbitControls.target=[0,-.2,0]):(this.cameraPosition={x:1.1,y:.55,z:.02},this.cameraTarget={x:0,y:0,z:0})}},{key:"postprocessing",value:function(){xe.composer=new ee.a(xe.renderer),Se(xe,this.scene,{resolution:new u.Jb(window.innerWidth,window.innerHeight),strength:.8,radius:.5,threshold:.7}),Oe(xe)}}])&&Be(t.prototype,n),r&&Be(t,r),e}());function He(e,t){var n=new Pe.a(Ge);n.uniforms.distortion.value=t.distortion,n.uniforms.distortion2.value=t.distortion2,n.uniforms.speed.value=t.speed,n.uniforms.rollSpeed.value=t.rollSpeed,e.composer.addPass(n);var r=new Pe.a(We);e.composer.addPass(r),e.onUpdate(function(e,t){return function(e){n.uniforms.time.value+=e}(e)})}var Ge={uniforms:{tDiffuse:{type:"t",value:null},time:{type:"f",value:0},distortion:{type:"f",value:3},distortion2:{type:"f",value:5},speed:{type:"f",value:.2},rollSpeed:{type:"f",value:.1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float time;","uniform float distortion;","uniform float distortion2;","uniform float speed;","uniform float rollSpeed;","varying vec2 vUv;","vec3 mod289(vec3 x) {","  return x - floor(x * (1.0 / 289.0)) * 289.0;","}","vec2 mod289(vec2 x) {","  return x - floor(x * (1.0 / 289.0)) * 289.0;","}","vec3 permute(vec3 x) {","  return mod289(((x*34.0)+1.0)*x);","}","float snoise(vec2 v)","  {","  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0","                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)","                     -0.577350269189626,  // -1.0 + 2.0 * C.x","                      0.024390243902439); // 1.0 / 41.0","  vec2 i  = floor(v + dot(v, C.yy) );","  vec2 x0 = v -   i + dot(i, C.xx);","  vec2 i1;","  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);","  vec4 x12 = x0.xyxy + C.xxzz;"," x12.xy -= i1;","  i = mod289(i); // Avoid truncation effects in permutation","  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))","\t\t+ i.x + vec3(0.0, i1.x, 1.0 ));","  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);","  m = m*m ;","  m = m*m ;","  vec3 x = 2.0 * fract(p * C.www) - 1.0;","  vec3 h = abs(x) - 0.5;","  vec3 ox = floor(x + 0.5);","  vec3 a0 = x - ox;","  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );","  vec3 g;","  g.x  = a0.x  * x0.x  + h.x  * x0.y;","  g.yz = a0.yz * x12.xz + h.yz * x12.yw;","  return 130.0 * dot(m, g);","}","void main() {","vec2 p = vUv;","float ty = time*speed;","float yt = p.y - ty;","float offset = snoise(vec2(yt*3.0,0.0))*0.2;","offset = offset*distortion * offset*distortion * offset;","offset += snoise(vec2(yt*50.0,0.0))*distortion2*0.001;","gl_FragColor = texture2D(tDiffuse,  vec2(fract(p.x + offset),fract(p.y-time*rollSpeed) ));","}"].join("\n")},We={uniforms:{tDiffuse:{type:"t",value:null},time:{type:"f",value:0},nIntensity:{type:"f",value:.5},sIntensity:{type:"f",value:.05},sCount:{type:"f",value:4096},grayscale:{type:"i",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float time;","uniform bool grayscale;","uniform float nIntensity;","uniform float sIntensity;","uniform float sCount;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 cTextureScreen = texture2D( tDiffuse, vUv );","float x = vUv.x * vUv.y * time *  1000.0;","x = mod( x, 13.0 ) * mod( x, 123.0 );","float dx = mod( x, 0.01 );","vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx * 100.0, 0.0, 1.0 );","vec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );","cResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;","cResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );","if( grayscale ) {","cResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );","}","gl_FragColor =  vec4( cResult, cTextureScreen.a );","}"].join("\n")};function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $e=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sceneKey="aboutScene",xe.scenes[this.sceneKey]=new u.vb,this.scene=xe.scenes[this.sceneKey],this.initScene(),xe.scenesParams[this.sceneKey]=this}var t,n,r;return t=e,(n=[{key:"initScene",value:function(){var e,t;this.setCamera(),e=this.scene,(t=new u.s(16777215,1)).position.set(-1,1,-1),e.add(t),this.aboutWolf=new Ue(xe,{scene:"about",skyIndex:"13"}),this.scene.add(this.aboutWolf)}},{key:"setCamera",value:function(){xe.orbitControls?(xe.orbitControls.position=[.37272409090935477,-.032702695716682634,.4033570652813696],xe.orbitControls.distance=.5,xe.orbitControls.target=[.2,0,0]):(this.cameraPosition={x:.4,y:0,z:.4},this.cameraTarget={x:0,y:0,z:-.4})}},{key:"postprocessing",value:function(){xe.composer=new ee.a(xe.renderer),Se(xe,this.scene,{resolution:new u.Jb(window.innerWidth,window.innerHeight),strength:0,radius:.5,threshold:.7}),He(xe,{distortion:.8,distortion2:1,speed:.5,rollSpeed:0}),Oe(xe)}}])&&Ne(t.prototype,n),r&&Ne(t,r),e}());function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Xe=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sceneKey="workScene",xe.scenes[this.sceneKey]=new u.vb,this.scene=xe.scenes[this.sceneKey],this.initScene(),xe.scenesParams[this.sceneKey]=this}var t,n,r;return t=e,(n=[{key:"initScene",value:function(){var e,t;this.setCamera(),e=this.scene,(t=new u.s(16777215,1)).position.set(1,1,1),e.add(t),this.workWolf=new Ue(xe,{scene:"work",skyIndex:"12",noSun:!1}),this.scene.add(this.workWolf),this.workSkybox=new Le(xe,{scene:"work",skyIndex:"12",noSun:!1}),this.scene.add(this.workSkybox)}},{key:"setCamera",value:function(){xe.orbitControls?(xe.orbitControls.position=[-.2078281158005838,.017467252995429144,-.28874058085994647],xe.orbitControls.distance=.5,xe.orbitControls.target=[.2,0,0]):(this.cameraPosition={x:-.2,y:.2,z:-.2},this.cameraTarget={x:.2,y:.02,z:-.05})}},{key:"postprocessing",value:function(){xe.composer=new ee.a(xe.renderer),Oe(xe)}}])&&Ye(t.prototype,n),r&&Ye(t,r),e}());function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Qe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.webgl=t,this.staticPosition=this.webgl.currentSceneParams.cameraPosition,this.webgl.cameraTarget=this.webgl.currentSceneParams.cameraTarget,this.easeTarget=new u.Kb,this.movementIntensity=.05,this.ease=.05,this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=this;window.DEBUG||this.webgl.onUpdate(function(t,n){return e.updateCamera()})}},{key:"updateCamera",value:function(){if(this.webgl.camera.inTransition)this.webgl.mouse2D.x=0,this.webgl.mouse2D.y=0,this.easeTarget.x=0,this.easeTarget.y=0,this.easeTarget.z=0;else{this.staticPosition=this.webgl.currentSceneParams.cameraPosition,this.webgl.cameraTarget=this.webgl.currentSceneParams.cameraTarget;var e=this.webgl.mouse2D.x*this.movementIntensity,t=this.webgl.mouse2D.y*this.movementIntensity;this.easeTarget.x+=(e-this.easeTarget.x)*this.ease,this.easeTarget.y+=(t-this.easeTarget.y)*this.ease,this.easeTarget.z+=(e-this.easeTarget.z)*this.ease,this.webgl.camera.position.x=this.staticPosition.x-this.easeTarget.x,this.webgl.camera.position.y=this.staticPosition.y-this.easeTarget.y,this.webgl.camera.position.z=this.staticPosition.z-this.easeTarget.z,this.webgl.camera.lookAt(this.webgl.cameraTarget.x,this.webgl.cameraTarget.y,this.webgl.cameraTarget.z)}}}])&&Je(t.prototype,n),r&&Je(t,r),e}(),Ze=n(141),et=n.n(Ze),tt=(n(205),n(1)),nt=n(61);function rt(e){return function(e){if(Array.isArray(e))return ot(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var it=n(206),st=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"leave",value:function(e){var t=e.current.container.querySelectorAll("h1");if(t)for(var n=0;n<t.length;n++){var r=t[n];it(r);var o=rt(r.querySelectorAll("span"));new tt.c({}).staggerFromTo(o,.4,{opacity:1,y:0},{opacity:0,y:25},.04)}var a=e.current.container.querySelectorAll("a");if(a)for(n=0;n<a.length;n++){r=a[n];it(r);o=rt(r.querySelectorAll("span"));new tt.c({}).staggerFromTo(o,.5,{opacity:1},{opacity:0},.04)}var i=e.current.container.querySelectorAll("h2");if(i)for(n=0;n<i.length;n++){r=i[n];it(r,{split:function(e){return e.split(/(\s+)/)}});o=rt(r.querySelectorAll("span"));new tt.c({}).staggerFromTo(o,.5,{opacity:1},{opacity:0},.04)}var s=e.current.container.querySelectorAll("p");if(s)for(n=0;n<s.length;n++){r=s[n];nt.a.to(r,.5,{opacity:0})}var c=e.trigger.dataset.scene;xe.currentSceneParams.sceneKey=c,function(e,t,n){if(!window.DEBUG){e.camera.inTransition=!0;var r=e.scenesParams[t],o={x:e.cameraTarget.x,y:e.cameraTarget.y,z:e.cameraTarget.z};tt.d.to(o,2,{x:r.cameraTarget.x,y:r.cameraTarget.y,z:r.cameraTarget.z,duration:2.5,ease:"power4.inOut"}),tt.d.to(e.camera.position,2,{x:r.cameraPosition.x,y:r.cameraPosition.y,z:r.cameraPosition.z,onUpdate:function(){e.camera.lookAt(o.x,o.y,o.z)},onComplete:function(){n()},duration:2.5,ease:"power4.inOut"})}}(xe,xe.currentSceneParams.sceneKey,function(){xe.currentScene=xe.scenes[c],xe.currentSceneParams=xe.scenesParams[c],xe.camera.inTransition=!1})}},{key:"enter",value:function(e){var t=e.next.container.querySelectorAll("h1");if(t)for(var n=0;n<t.length;n++){var r=t[n];it(r);var o=rt(r.querySelectorAll("span"));new tt.c({}).staggerFromTo(o,.4,{opacity:0,y:-25},{opacity:1,y:0},.04)}var a=e.next.container.querySelectorAll("a");if(a)for(n=0;n<a.length;n++){r=a[n];it(r);o=rt(r.querySelectorAll("span"));new tt.c({}).staggerFromTo(o,.5,{opacity:0},{opacity:1},.04)}var i=e.next.container.querySelectorAll("h2");if(i)for(n=0;n<i.length;n++){r=i[n];it(r,{split:function(e){return e.split(/(\s+)/)}});o=rt(r.querySelectorAll("span"));new tt.c({}).staggerFromTo(o,.5,{opacity:0},{opacity:1},.04)}var s=e.next.container.querySelectorAll("p");if(s)for(n=0;n<s.length;n++){r=s[n];new tt.c({}).fromTo(r,1,{opacity:0},{opacity:1})}}}])&&at(t.prototype,n),r&&at(t,r),e}();function ct(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function ut(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){ct(a,r,o,i,s,"next",e)}function s(e){ct(a,r,o,i,s,"throw",e)}i(void 0)})}}window.DEBUG=window.location.search.includes("debug"),xe.canvas.style.visibility="hidden",q.load({renderer:xe.renderer}).then(function(){function e(e){return e=e||2e3,new Promise(function(t){setTimeout(function(){t()},e)})}xe.canvas.style.visibility="";var t=new st;et.a.init({debug:!0,transitions:[{name:"default-transition",leave:function(n){var r=this;return ut(regeneratorRuntime.mark(function o(){var a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=r.async(),t.leave(n),o.next=4,e(2e3);case 4:a();case 5:case"end":return o.stop()}},o)}))()},enter:function(e){return t.enter(e)}}],views:[{namespace:"home",afterEnter:function(e){return ut(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Fe.postprocessing();case 1:case"end":return e.stop()}},e)}))()}},{namespace:"about",afterEnter:function(e){return ut(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$e.postprocessing();case 1:case"end":return e.stop()}},e)}))()}},{namespace:"work",afterEnter:function(e){return ut(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Xe.postprocessing();case 1:case"end":return e.stop()}},e)}))()}}]}),xe.currentScene=xe.scenes.landingScene,xe.currentSceneParams=xe.scenesParams.landingScene,Fe.postprocessing();new Qe(xe);console.log(xe),xe.start(),xe.draw()})}});
//# sourceMappingURL=app.f19d0b03.js.map